File: ./App.test.tsx
import React from 'react';
import { render } from '@testing-library/react';
import App from './App';

test('renders without crashing', () => {
  const { baseElement } = render(<App />);
  expect(baseElement).toBeDefined();
});
File: ./App.tsx
import { Redirect, Route } from 'react-router-dom';
import {
  IonApp,
  IonIcon,
  IonLabel,
  IonRouterOutlet,
  IonTabBar,
  IonTabButton,
  IonTabs,
  setupIonicReact
} from '@ionic/react';
import { IonReactRouter } from '@ionic/react-router';
import { ellipse, square, triangle } from 'ionicons/icons';
import AppRoutes from './presentation/routes/AppRoutes';
import Tab1 from './presentation/pages/Tab1';
import Tab2 from './presentation/pages/Tab2';
import Tab3 from './presentation/pages/Tab3';

/* Core CSS required for Ionic components to work properly */
import '@ionic/react/css/core.css';

/* Basic CSS for apps built with Ionic */
import '@ionic/react/css/normalize.css';
import '@ionic/react/css/structure.css';
import '@ionic/react/css/typography.css';

/* Optional CSS utils that can be commented out */
import '@ionic/react/css/padding.css';
import '@ionic/react/css/float-elements.css';
import '@ionic/react/css/text-alignment.css';
import '@ionic/react/css/text-transformation.css';
import '@ionic/react/css/flex-utils.css';
import '@ionic/react/css/display.css';



/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* import '@ionic/react/css/palettes/dark.always.css'; */
/* import '@ionic/react/css/palettes/dark.class.css'; */
import '@ionic/react/css/palettes/dark.system.css';

/* Theme variables */
import './theme/variables.css';

setupIonicReact();

const App: React.FC = () => (
  <IonApp>
    <IonReactRouter>
      <IonTabs>
        <IonRouterOutlet>
        <AppRoutes />
          <Route exact path="/tab1">
            <Tab1 />
          </Route>
          <Route exact path="/tab2">
            <Tab2 />
          </Route>
          <Route path="/tab3">
            <Tab3 />
          </Route>
          <Route exact path="/">
            <Redirect to="/tab1" />
          </Route>
        </IonRouterOutlet>
        <IonTabBar slot="bottom">
          <IonTabButton tab="tab1" href="/tab1">
            <IonIcon aria-hidden="true" icon={triangle} />
            <IonLabel>Tab 1</IonLabel>
          </IonTabButton>
          <IonTabButton tab="tab2" href="/tab2">
            <IonIcon aria-hidden="true" icon={ellipse} />
            <IonLabel>Tab 2</IonLabel>
          </IonTabButton>
          <IonTabButton tab="tab3" href="/tab3">
            <IonIcon aria-hidden="true" icon={square} />
            <IonLabel>Tab 3</IonLabel>
          </IonTabButton>
        </IonTabBar>
      </IonTabs>
    </IonReactRouter>
  </IonApp>
);

export default App;
File: ./application/services/AuthService.ts
export class AuthService {
    private static isAuthenticated = false;
  
    static login(username: string, password: string): boolean {
      if (username === 'user' && password === '123') {
        this.isAuthenticated = true;
        return true;
      }
      return false;
    }
  
    static logout(): void {
      this.isAuthenticated = false;
    }
  
    static isLoggedIn(): boolean {
      return this.isAuthenticated;
    }
  }
  File: ./application/services/GeolocationService.ts
import { Geolocation } from '@capacitor/geolocation';

export interface Location {
  latitude: number;
  longitude: number;
}

export class GeolocationService {
  static async getCurrentLocation(): Promise<Location | null> {
    try {
      const position = await Geolocation.getCurrentPosition();
      return {
        latitude: position.coords.latitude,
        longitude: position.coords.longitude,
      };
    } catch (error) {
      console.error('Error getting location from GPS:', error);
      return null;
    }
  }
}
File: ./application/services/LocalStorageService.ts
import { Preferences } from '@capacitor/preferences';

export class LocalStorageService {
  
  static async saveData(key: string, data: any): Promise<void> {
    await Preferences.set({
      key: key,
      value: JSON.stringify(data),
    });
  }


  static async getData(key: string): Promise<any | null> {
    const { value } = await Preferences.get({ key: key });
    return value ? JSON.parse(value) : null;
  }


  static async removeData(key: string): Promise<void> {
    await Preferences.remove({ key: key });
  }


  static async clearStorage(): Promise<void> {
    await Preferences.clear();
  }
}
File: ./application/services/PhotoService.ts
import { Camera, CameraResultType, CameraSource, Photo as CameraPhoto } from '@capacitor/camera';
import { Filesystem, Directory } from '@capacitor/filesystem';
import { Photo } from '../../domain/entities/Photo';

export async function takePhoto(): Promise<Photo> {
  const photo = await Camera.getPhoto({
    resultType: CameraResultType.Uri,
    source: CameraSource.Camera,
    quality: 100,
  });

  const savedPhoto = await savePhoto(photo);
  return savedPhoto;
}

async function savePhoto(cameraPhoto: CameraPhoto): Promise<Photo> {
  const base64Data = await readAsBase64(cameraPhoto);

  const fileName = `${new Date().getTime()}.jpeg`;
  await Filesystem.writeFile({
    path: fileName,
    data: base64Data,
    directory: Directory.Data,
  });

  return {
    filepath: fileName,
    webviewPath: cameraPhoto.webPath,
  };
}

async function readAsBase64(photo: CameraPhoto): Promise<string> {
  const response = await fetch(photo.webPath!);
  const blob = await response.blob();
  return await convertBlobToBase64(blob);
}

function convertBlobToBase64(blob: Blob): Promise<string> {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onerror = reject;
    reader.onload = () => {
      resolve(reader.result as string);
    };
    reader.readAsDataURL(blob);
  });
}
File: ./application/use-cases/AddPhotoToGallery.ts
import { takePhoto } from "../services/PhotoService";  // Named import for takePhoto
import { PhotoRepository } from "../../domain/repositories/PhotoRepository";
import { Photo } from "../../domain/entities/Photo";

export class AddPhotoToGallery {
  constructor(private photoRepository: PhotoRepository) {}

  async execute(): Promise<Photo> {
    const newPhoto = await takePhoto();
    await this.photoRepository.save(newPhoto);
    return newPhoto;
  }
}
File: ./application/use-cases/GetPhotos.ts
import { PhotoRepository } from "../../domain/repositories/PhotoRepository";
import { Photo } from "../../domain/entities/Photo";

export class GetPhotos {
  constructor(private photoRepository: PhotoRepository) {}

  async execute(): Promise<Photo[]> {
    return await this.photoRepository.getAll();
  }
}
File: ./components/ExploreContainer.css
.container {
  text-align: center;
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
}

.container strong {
  font-size: 20px;
  line-height: 26px;
}

.container p {
  font-size: 16px;
  line-height: 22px;
  color: #8c8c8c;
  margin: 0;
}

.container a {
  text-decoration: none;
}File: ./components/ExploreContainer.tsx
import './ExploreContainer.css';

interface ContainerProps {
  name: string;
}

const ExploreContainer: React.FC<ContainerProps> = ({ name }) => {
  return (
    <div className="container">
      <strong>{name}</strong>
      <p>Explore <a target="_blank" rel="noopener noreferrer" href="https://ionicframework.com/docs/components">UI Components</a></p>
    </div>
  );
};

export default ExploreContainer;
File: ./components/MapComponent.tsx
import React, { useState } from 'react';
import { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';
import 'leaflet/dist/leaflet.css'; // Importamos los estilos de Leaflet
import L from 'leaflet';

// Actualización del icono por defecto en Leaflet
L.Icon.Default.mergeOptions({
  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',
  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',
});

interface Location {
  latitude: number;
  longitude: number;
}

interface MapComponentProps {
  onLocationSelect: (location: Location) => void;
}   

const MapComponent: React.FC<MapComponentProps> = ({ onLocationSelect }) => {
  const [position, setPosition] = useState<Location | null>(null);

  const MapClickHandler = () => {
    useMapEvents({
      click(e) {
        const newPosition = {
          latitude: e.latlng.lat,
          longitude: e.latlng.lng,
        };
        setPosition(newPosition);
        onLocationSelect(newPosition); // Pasar la ubicación seleccionada al componente padre
      },
    });
    return position ? <Marker position={[position.latitude, position.longitude]}></Marker> : null;
  };

  return (
    <MapContainer center={[51.505, -0.09]} zoom={13} style={{ height: '400px', width: '100%' }}>
      <TileLayer
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      />
      <MapClickHandler />
    </MapContainer>
  );
};

export default MapComponent;
File: ./domain/entities/Photo.ts
export interface Photo {
    filepath: string;
    webviewPath?: string;
  }
  File: ./domain/repositories/PhotoRepository.ts
import { Photo } from "../entities/Photo";

export interface PhotoRepository {
  save(photo: Photo): Promise<void>;
  getAll(): Promise<Photo[]>;
}
File: ./infrastructure/api/LocalPhotoRepository.ts
import { Photo } from "../../domain/entities/Photo";
import { PhotoRepository } from "../../domain/repositories/PhotoRepository";
import { Preferences } from '@capacitor/preferences';


const PHOTO_STORAGE_KEY = "photos";

export class LocalPhotoRepository implements PhotoRepository {
  async save(photo: Photo): Promise<void> {
    const photos = await this.getAll();
    photos.unshift(photo);  // Añadir la nueva foto al principio
    await Preferences.set({
      key: 'myKey',
      value: 'myValue',
    });
  }

  async getAll(): Promise<Photo[]> {
    const { value } = await Preferences.get({ key: 'myKey' });
    return value ? JSON.parse(value) : [];
  }
}
File: ./main.tsx
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const container = document.getElementById('root');
const root = createRoot(container!);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);File: ./presentation/components/AddPhotoButton.tsx
import React from 'react';
import { IonFab, IonFabButton, IonIcon } from '@ionic/react';
import { camera } from 'ionicons/icons';

interface AddPhotoButtonProps {
  onClick: () => void;
}

const AddPhotoButton: React.FC<AddPhotoButtonProps> = ({ onClick }) => {
  return (
    <IonFab vertical="bottom" horizontal="center" slot="fixed">
      <IonFabButton onClick={onClick}>
        <IonIcon icon={camera} />
      </IonFabButton>
    </IonFab>
  );
};

export default AddPhotoButton;
File: ./presentation/components/PhotoGallery.tsx
import React from 'react';
import { IonGrid, IonRow, IonCol, IonImg } from '@ionic/react';
import { Photo } from '../../domain/entities/Photo';

interface PhotoGalleryProps {
  photos: Photo[];
}

const PhotoGallery: React.FC<PhotoGalleryProps> = ({ photos }) => {
  return (
    <IonGrid>
      <IonRow>
        {photos.map((photo, index) => (
          <IonCol size="6" key={index}>
            <IonImg src={photo.webviewPath} />
          </IonCol>
        ))}
      </IonRow>
    </IonGrid>
  );
};

export default PhotoGallery;
File: ./presentation/components/PhotoItem.tsx
import React from 'react';
import { IonImg } from '@ionic/react';
import { Photo } from '../../domain/entities/Photo';

interface PhotoItemProps {
  photo: Photo;
}

const PhotoItem: React.FC<PhotoItemProps> = ({ photo }) => {
  return <IonImg src={photo.webviewPath} />;
};

export default PhotoItem;
File: ./presentation/pages/Login.tsx
import React, { useState } from 'react';
import { IonButton, IonContent, IonInput, IonPage, IonTitle, IonToolbar, IonHeader, IonToast } from '@ionic/react';
import { useHistory } from 'react-router-dom';
import { AuthService } from '../../application/services/AuthService';

const Login: React.FC = () => {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [showToast, setShowToast] = useState(false);
  const history = useHistory();

  const handleLogin = () => {
    if (AuthService.login(username, password)) {
      history.push('/register-patient');
    } else {
      setShowToast(true);
    }
  };

  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Login</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent>
        <IonInput
          value={username}
          placeholder="Username"
          onIonChange={(e: CustomEvent) => setUsername(e.detail.value!)}
          clearInput
        />
        <IonInput
          value={password}
          type="password"
          placeholder="Password"
          onIonChange={(e: CustomEvent) => setPassword(e.detail.value!)}
          clearInput
        />
        <IonButton expand="block" onClick={handleLogin}>
          Login
        </IonButton>
        <IonToast
          isOpen={showToast}
          onDidDismiss={() => setShowToast(false)}
          message="Invalid credentials."
          duration={2000}
        />
      </IonContent>
    </IonPage>
  );
};

export default Login;
File: ./presentation/pages/MapPage.tsx
import React, { useState, useEffect } from 'react';
import { useHistory, useLocation } from 'react-router-dom';
import { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';
import 'leaflet/dist/leaflet.css'; // Importar los estilos de Leaflet
import { IonPage, IonHeader, IonToolbar, IonTitle, IonContent, IonButton } from '@ionic/react';

interface Location {
  latitude: number;
  longitude: number;
}

const MapPage: React.FC = () => {
  const [selectedLocation, setSelectedLocation] = useState<Location | null>(null);
  const [initialLocation, setInitialLocation] = useState<Location | null>(null);
  const history = useHistory();
  const locationState = useLocation<{ gpsLocation: Location } | undefined>();

  useEffect(() => {
    if (locationState?.state?.gpsLocation) {
      setInitialLocation(locationState.state.gpsLocation);
    } else {
      setInitialLocation({
        latitude: 51.505,
        longitude: -0.09,
      });
    }
  }, [locationState]);

  const MapClickHandler = () => {
    useMapEvents({
      click(e) {
        const location = {
          latitude: e.latlng.lat,
          longitude: e.latlng.lng,
        };
        setSelectedLocation(location);
      },
    });
    return selectedLocation ? <Marker position={[selectedLocation.latitude, selectedLocation.longitude]}></Marker> : null;
  };

  const handleConfirmLocation = () => {
    if (selectedLocation) {
      history.push('/register-patient', { location: selectedLocation });
    } else if (initialLocation) {
      history.push('/register-patient', { location: initialLocation });
    }
  };

  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Seleccionar Ubicación en el Mapa</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent>
        {initialLocation && (
          <MapContainer center={[initialLocation.latitude, initialLocation.longitude]} zoom={13} style={{ height: '400px', width: '100%' }}>
          <TileLayer
            url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
            attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
          />
          <MapClickHandler />
        </MapContainer>
        )}
        {selectedLocation || initialLocation ? (
          <IonButton expand="block" onClick={handleConfirmLocation}>
            Confirmar Ubicación
          </IonButton>
        ) : (
          <IonButton expand="block" disabled>
            Confirmar Ubicación
          </IonButton>
        )}
      </IonContent>
    </IonPage>
  );
};

export default MapPage;
File: ./presentation/pages/RegisterPatient.tsx
import React, { useState, useEffect } from 'react';
import { IonButton, IonContent, IonInput, IonPage, IonTitle, IonToolbar, IonHeader, IonItem, IonLabel, IonImg, IonGrid, IonRow, IonCol } from '@ionic/react';
import { useHistory, useLocation } from 'react-router-dom';
import { GeolocationService, Location as GeoLocation } from '../../application/services/GeolocationService';
import { takePhoto } from '../../application/services/PhotoService';
import { Photo } from '../../domain/entities/Photo';
import { LocalStorageService } from '../../application/services/LocalStorageService';

const RegisterPatient: React.FC = () => {
  const [name, setName] = useState('');
  const [age, setAge] = useState('');
  const [identification, setIdentification] = useState('');
  const [condition, setCondition] = useState('');
  const [photos, setPhotos] = useState<Photo[]>([]);
  const [location, setLocation] = useState<GeoLocation | null>(null);
  const [manualLocation, setManualLocation] = useState('');
  const history = useHistory();
  const locationState = useLocation<{ location: GeoLocation } | undefined>();

  useEffect(() => {
    loadFormData();
    if (locationState?.state?.location) {
      setLocation(locationState.state.location);
    }
  }, [locationState]);

  const loadFormData = async () => {
    const savedData = await LocalStorageService.getData('patientForm');
    if (savedData) {
      setName(savedData.name || '');
      setAge(savedData.age || '');
      setIdentification(savedData.identification || '');
      setCondition(savedData.condition || '');
      setPhotos(savedData.photos || []);
      setLocation(savedData.location || null);
    }
  };

  const saveFormData = async () => {
    const formData = {
      name,
      age,
      identification,
      condition,
      photos,
      location,
    };
    await LocalStorageService.saveData('patientForm', formData);
  };

  // Obtener ubicación desde GPS y abrir el mapa
  const handleOpenMap = async () => {
    const gpsLocation = await GeolocationService.getCurrentLocation();
    if (gpsLocation) {
      history.push('/map', { gpsLocation });
    } else {
      // Si no se puede obtener la ubicación del GPS, redirigir al mapa para seleccionar manualmente
      history.push('/map');
    }
  };

  const handleTakePhoto = async () => {
    const newPhoto = await takePhoto();
    setPhotos([...photos, newPhoto]);
  };

  const handleSubmit = () => {
    console.log({
      name,
      age,
      identification,
      condition,
      location,
      photos,
    });
    saveFormData();
  };

  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Registrar Paciente</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent>
        <IonItem>
          <IonLabel position="stacked">Nombre</IonLabel>
          <IonInput
            value={name}
            placeholder="Nombre"
            onIonChange={(e: CustomEvent) => setName(e.detail.value!)}
          />
        </IonItem>

        <IonItem>
          <IonLabel position="stacked">Edad</IonLabel>
          <IonInput
            value={age}
            type="number"
            placeholder="Edad"
            onIonChange={(e: CustomEvent) => setAge(e.detail.value!)}
          />
        </IonItem>

        <IonItem>
          <IonLabel position="stacked">Identificación</IonLabel>
          <IonInput
            value={identification}
            placeholder="Identificación"
            onIonChange={(e: CustomEvent) => setIdentification(e.detail.value!)}
          />
        </IonItem>

        <IonItem>
          <IonLabel position="stacked">Condición</IonLabel>
          <IonInput
            value={condition}
            placeholder="Condición"
            onIonChange={(e: CustomEvent) => setCondition(e.detail.value!)}
          />
        </IonItem>

        {/* Botón para gestionar la ubicación (GPS o selección manual) */}
        <IonButton expand="block" onClick={handleOpenMap}>
          Seleccionar Ubicación
        </IonButton>
        
        {location && (
          <IonItem>
            <IonLabel>Latitud: {location.latitude}</IonLabel>
            <IonLabel>Longitud: {location.longitude}</IonLabel>
          </IonItem>
        )}

        <IonButton expand="block" onClick={handleTakePhoto}>
          Tomar Foto
        </IonButton>

        {/* Mostrar las fotos tomadas */}
        <IonGrid>
          <IonRow>
            {photos.map((photo, index) => (
              <IonCol size="6" key={index}>
                <IonImg src={photo.webviewPath} />
              </IonCol>
            ))}
          </IonRow>
        </IonGrid>

        <IonButton expand="block" onClick={handleSubmit}>
          Enviar
        </IonButton>
      </IonContent>
    </IonPage>
  );
};

export default RegisterPatient;
File: ./presentation/pages/Tab1.css
File: ./presentation/pages/Tab1.tsx
import React, { useState } from 'react';
import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonFab, IonFabButton, IonIcon, IonGrid, IonRow, IonCol, IonImg } from '@ionic/react';
import { camera } from 'ionicons/icons';
import { takePhoto } from '../../application/services/PhotoService';
import { Photo } from '../../domain/entities/Photo';
import './Tab1.css';


const Tab1: React.FC = () => {
  const [photos, setPhotos] = useState<Photo[]>([]);

  const addPhotoToGallery = async () => {
    const newPhoto = await takePhoto();
    setPhotos([newPhoto, ...photos]);
  };

  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Photo Gallery</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent fullscreen>
        <IonGrid>
          <IonRow>
            {photos.map((photo, index) => (
              <IonCol size="6" key={index}>
                <IonImg src={photo.webviewPath} />
              </IonCol>
            ))}
          </IonRow>
        </IonGrid>
        <IonFab vertical="bottom" horizontal="center" slot="fixed">
          <IonFabButton onClick={addPhotoToGallery}>
            <IonIcon icon={camera}></IonIcon>
          </IonFabButton>
        </IonFab>
      </IonContent>
    </IonPage>
  );
};

export default Tab1;File: ./presentation/pages/Tab2.css
File: ./presentation/pages/Tab2.tsx
import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar } from '@ionic/react';
import ExploreContainer from '../../components/ExploreContainer';
import './Tab2.css';

const Tab2: React.FC = () => {
  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Tab 2</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent fullscreen>
        <IonHeader collapse="condense">
          <IonToolbar>
            <IonTitle size="large">Tab 2</IonTitle>
          </IonToolbar>
        </IonHeader>
        <ExploreContainer name="Tab 2 page" />
      </IonContent>
    </IonPage>
  );
};

export default Tab2;File: ./presentation/pages/Tab3.css
File: ./presentation/pages/Tab3.tsx
import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar } from '@ionic/react';
import ExploreContainer from '../../components/ExploreContainer';
import './Tab3.css';

const Tab3: React.FC = () => {
  return (
    <IonPage>
      <IonHeader>
        <IonToolbar>
          <IonTitle>Tab 3</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent fullscreen>
        <IonHeader collapse="condense">
          <IonToolbar>
            <IonTitle size="large">Tab 3</IonTitle>
          </IonToolbar>
        </IonHeader>
        <ExploreContainer name="Tab 3 page" />
      </IonContent>
    </IonPage>
  );
};

export default Tab3;File: ./presentation/routes/AppRoutes.tsx
import React from "react";
import { Route, Redirect, RouteProps } from "react-router-dom";
import Tab1 from "../pages/Tab1";
import Tab2 from "../pages/Tab2";
import Tab3 from "../pages/Tab3";
import Login from "../pages/Login";
import RegisterPatient from "../pages/RegisterPatient";
import { AuthService } from "../../application/services/AuthService";
import MapPage from '../pages/MapPage';

interface PrivateRouteProps extends RouteProps {
  component: React.ComponentType<any>;
}

const PrivateRoute: React.FC<PrivateRouteProps> = ({
  component: Component,
  ...rest
}) => (
  <Route
    {...rest}
    render={(props) =>
      AuthService.isLoggedIn() ? (
        <Component {...props} />
      ) : (
        <Redirect to="/login" />
      )
    }
  />
);

const AppRoutes: React.FC = () => (
  <>
    {/* Rutas Públicas */}
    <Route path="/login" component={Login} exact={true} />

    {/* Ruta para registrar un paciente */}
    <PrivateRoute
      path="/register-patient"
      component={RegisterPatient}
      exact={true}
    />

    {/* Rutas Privadas */}
    <PrivateRoute path="/tab1" component={Tab1} exact={true} />
    <PrivateRoute path="/tab2" component={Tab2} exact={true} />
    <PrivateRoute path="/tab3" component={Tab3} exact={true} />
    
{/* Ruta pública para el mapa (puedes cambiarla a privada si es necesario) */}
<Route path="/map" component={MapPage} exact={true} />

{/* Redirección por defecto */}
    <Route
      path="/"
      exact={true}
      render={() =>
        AuthService.isLoggedIn() ? (
          <Redirect to="/register-patient" />
        ) : (
          <Redirect to="/login" />
        )
      }
    />
  </>
);

export default AppRoutes;
File: ./setupTests.ts
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom/extend-expect';

// Mock matchmedia
window.matchMedia = window.matchMedia || function() {
  return {
      matches: false,
      addListener: function() {},
      removeListener: function() {}
  };
};
File: ./theme/variables.css
/* For information on how to create your own theme, please see:
http://ionicframework.com/docs/theming/ */
File: ./vite-env.d.ts
/// <reference types="vite/client" />
